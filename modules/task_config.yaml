# AlphaCore Task Generation Configuration
#
# Loaded by subnet.validator.api TaskGenerationPipeline (via ALPHACORE_CONFIG)
# to determine providers, resource families, and task banks available to validators.
#
# Hierarchy:
#   providers -> task_banks -> families -> resources
#
# Each level can be:
#   enabled: true/false     - Enable/disable entire level
#   items: [...]            - Whitelist specific items (omit = all enabled)

# =============================================================================
# PROVIDERS
# =============================================================================
providers:
  gcp:
    enabled: true

    # Task Banks (single vs composite resources)
    task_banks:
      single_resource:
        enabled: true
        # Which resource types to enable for single-resource tasks
        # Omit 'resources' to enable all available resources
        resources:
          - compute_instance_basic
          - artifact_repository
          - pubsub_topic

      composite_resource:
        enabled: true
        min_resources: 2
        max_resources: 4

        # Composition families for multi-resource tasks
        # Names must match modules.generation.terraform.providers.gcp.compositions.COMPOSITE_FAMILIES
        # Disable any family that introduces service accounts or IAM bindings.
        families:
          network_stack:
            enabled: true
            resources:
              - vpc_network
              - subnetwork
              - firewall_rule
              - compute_instance_networked

          network_without_instance:
            enabled: true
            resources:
              - vpc_network
              - subnetwork
              - firewall_rule
              - compute_instance_basic

          storage_delivery:
            enabled: false
            resources:
              - storage_bucket
              - artifact_repository
              - pubsub_topic

          artifact_delivery:
            enabled: false
            resources:
              - artifact_repository
              - storage_bucket
              - pubsub_topic
              - storage_bucket_object

          bucket_with_object:
            enabled: false
            resources:
              - storage_bucket
              - storage_bucket_object
              - pubsub_topic

          network_plus_storage:
            enabled: false
            resources:
              - vpc_network
              - subnetwork
              - firewall_rule
              - compute_instance_networked
              # storage_bucket and artifact_repository disabled to avoid global name collisions
              # - storage_bucket
              # - storage_bucket_object
              # - artifact_repository

          network_plus_artifacts:
            enabled: false
            resources:
              - vpc_network
              - subnetwork
              - firewall_rule
              - compute_instance_networked
              - artifact_repository
              - storage_bucket
              - storage_bucket_object

          network_plus_pubsub:
            enabled: false
            resources:
              - vpc_network
              - subnetwork
              - firewall_rule
              - compute_instance_networked
              - pubsub_topic
              # - storage_bucket
              # - storage_bucket_object

          storage_with_pubsub:
            enabled: false
            resources:
              - storage_bucket
              - pubsub_topic
              - artifact_repository
              - storage_bucket_object

          dns_frontend:
            enabled: false
            resources:
              - dns_managed_zone
              - storage_bucket
              - storage_bucket_object
              - pubsub_topic

          dns_network_bridge:
            enabled: false
            resources:
              - dns_managed_zone
              - vpc_network
              - subnetwork
              - compute_instance_networked
              - firewall_rule
              - storage_bucket

          topic_with_subscription:
            enabled: false
            resources:
              - pubsub_topic
              - pubsub_subscription
              - storage_bucket

          service_account_delivery:
            enabled: false
            resources:
              - service_account
              - storage_bucket
              - artifact_repository
              - pubsub_topic
              - storage_bucket_object

          network_plus_service_account:
            enabled: false
            resources:
              - vpc_network
              - subnetwork
              - firewall_rule
              - compute_instance_networked
              - service_account
              - storage_bucket
              - artifact_repository
              - storage_bucket_object

          bucket_object_with_iam:
            enabled: false
            resources:
              - storage_bucket
              - storage_bucket_object
              - service_account
              - bucket_iam_member

          project_with_iam:
            enabled: false
            resources:
              - service_account
              - project_iam_member

  aws:
    enabled: false  # AWS support coming soon

  azure:
    enabled: false  # Azure support coming soon

# =============================================================================
# GLOBAL SETTINGS
# =============================================================================
settings:
  # Task repository configuration
  repository:
    # Path to store generated tasks (relative to project root or absolute)
    path: ./tasks  # Relative path from project root
    # Each task creates a folder: <path>/<task_id>/
    #   - miner.json     (prompt only, sent to miners)
    #   - validator.json (full task with invariants)

  # LLM instruction generation
  llm:
    enabled: true  # Set to false to use deterministic fallback
    model: gpt-5-mini
    temperature: 0.6
    fallback_on_failure: true
